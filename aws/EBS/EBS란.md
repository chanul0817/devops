# EBS (Elastic Block Storage) 핵심 정리

## 1. EBS란?
- AWS EC2 인스턴스에 연결하는 **가상 하드디스크(블록 스토리지)** 서비스
- EC2와 네트워크로 연결되어, 인스턴스가 종료되어도 데이터가 독립적으로 유지됨
- 필요에 따라 용량/성능을 빠르게 확장 가능
- 사용한 만큼만 비용을 지불(프로비저닝한 용량 기준 과금)

---

## 2. EBS ↔ EC2 연결 특징

- EC2 인스턴스와 **별개로 동작**: 인스턴스 종료/정지 시에도 EBS 데이터는 유지
- 하나의 인스턴스에 여러 EBS 볼륨 연결 가능 (C, D 드라이브처럼)
- 하나의 EBS 볼륨을 여러 EC2에 동시에 연결(Multi-Attach, io1/io2 타입 한정, 최대 16대)
- **같은 가용영역(AZ) 내에서만 연결 가능**
- EBS 볼륨은 필요시 다른 인스턴스에 재연결 가능(USB처럼)

---

## 3. EBS 볼륨 타입

| 타입                | 특징                   | 용도/성능                    |
|---------------------|------------------------|------------------------------|
| GP3 (범용 SSD)      | 기본형, 저렴, 빠름     | 대부분의 일반적 워크로드     |
| io2 (프로비저닝 IOPS)| 고성능 SSD, IOPS 조절  | DB 등 고성능/고신뢰 필요시   |
| st1 (Throughput HDD)| 대용량, 저렴           | 빅데이터, 로그 등            |
| sc1 (Cold HDD)      | 저렴, 느림             | 자주 접근하지 않는 데이터    |
| Standard (마그네틱) | 구형, 비추천           | 테스트용/비용 절감           |

- **IOPS** 수치가 높을수록 데이터 처리 속도가 빠름

---

## 4. EBS vs Instance Storage

| 구분              | EBS                           | Instance Storage            |
|-------------------|-------------------------------|-----------------------------|
| 연결 방식         | 네트워크 연결(외부 저장소)    | EC2 내부(로컬 저장소)       |
| 데이터 유지       | 인스턴스 종료 후에도 유지      | 인스턴스 종료 시 삭제       |
| 용도              | 영구 데이터, DB, 파일 저장    | 캐시, 임시 데이터           |
| 추가/분리         | 자유롭게 연결/분리 가능        | 불가능                      |

---

## 5. EBS 볼륨 사용 절차

1. **EBS 볼륨 생성** (EC2 콘솔/CLI)
2. **EC2 인스턴스에 볼륨 연결**
3. **리눅스에서 볼륨 확인**: `lsblk`, `ls -asl /dev/xvd*`
4. **파일시스템 포맷**: `mkfs -t ext4 /dev/xvdb`
5. **마운트 디렉토리 생성**: `mkdir /xvdb`
6. **마운트**: `mount /dev/xvdb /xvdb`
7. **/etc/fstab 등록**: 재부팅 시 자동 마운트
8. **디스크 사용 확인**: `df -h`

---

## 6. EBS 볼륨 확장

- 콘솔/CLI에서 크기 확장 가능(데이터 유지)
- 리눅스에서 `resize2fs`(ext4), `xfs_growfs`(xfs) 등 명령어로 파일시스템 확장 필요

---

## 7. 기타 특징 및 과금

- 스냅샷 기능 지원: S3에 백업, 복구 가능
- 인스턴스 중지/삭제와 무관하게 **EBS는 계속 과금**
- 프로비저닝 IOPS/스냅샷 등 옵션에 따라 추가 요금 발생

---

## 8. 요약

- EBS는 EC2용 가상 디스크(블록 스토리지)로, 데이터 영구 저장과 유연한 확장 지원
- 인스턴스와 독립적, 다양한 타입/성능/용량 선택 가능
- Instance Storage와 비교해 데이터 영구성/유연성에서 강점
