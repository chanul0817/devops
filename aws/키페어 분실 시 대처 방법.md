# 키페어(Key Pair) 분실 시 대처 방법

키페어를 분실하면 복구는 불가능합니다. 기존 키로는 더 이상 SSH 접속이 불가하므로, 새로운 키페어로 교체해야 합니다.

---

## Key Pair란?
- EC2 등 클라우드 서버에 접속할 때 사용하는 인증 파일
- AWS는 인스턴스에 공개키(Public Key)를 저장, 사용자는 개인키(Private Key)를 보관
- 확장자: .pem(Linux), .ppk(Windows PuTTY)
- 원리: HTTPS와 같은 공개키 암호화 방식

---

## 키페어 분실 시 대처 방법

### 방법 1. EBS 볼륨을 이용한 키페어 교체

1. 분실한 인스턴스(A)를 중지하고, 루트 EBS 볼륨을 분리
2. 내가 접근 가능한 인스턴스(B)에 해당 EBS 볼륨을 연결
3. 인스턴스 B에서 볼륨을 마운트
4. 내 키의 공개키를 마운트한 볼륨의 authorized_keys에 복사
5. 볼륨을 언마운트하고, 다시 인스턴스 A에 연결
6. 새 키로 인스턴스 A에 SSH 접속

#### 명령어 예시

lsblk
sudo mount -o nouuid /dev/xvdf1 /mnt
cat /home/ec2-user/.ssh/authorized_keys > /mnt/home/ec2-user/.ssh/authorized_keys
sudo umount /mnt

- 루트 볼륨 연결 시 디바이스 이름은 원래 인스턴스의 이름(/dev/xvda 등)으로 지정해야 함

---

### 방법 2. AMI 이미지로 새 인스턴스 생성

1. 분실한 인스턴스를 중지
2. 해당 인스턴스로부터 AMI 이미지 생성
3. 새 키페어를 선택하여 새로운 인스턴스 생성
4. 새 인스턴스로 접속

- 기존 인스턴스의 설정과 데이터를 그대로 유지하면서 키페어만 새로 설정할 수 있어 간편

---

## 결론 요약

| 항목      | 방법 1: EBS 마운트             | 방법 2: AMI 복제           |
|-----------|-------------------------------|----------------------------|
| 복잡도    | 다소 복잡                     | 간단                       |
| 접속 환경 | 리눅스 명령어 숙지 필요        | AWS 콘솔에서 대부분 처리   |
| 특징      | 기존 인스턴스를 그대로 사용    | 새 인스턴스가 생김         |
