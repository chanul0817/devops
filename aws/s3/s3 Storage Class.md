# S3 스토리지 클래스 (Storage Class)

S3는 저장하는 데이터의 **사용 빈도**와 **필요한 내구성/가용성 수준**에 따라 다양한 스토리지 클래스를 제공한다.

---

## 기본 개념

- 자주 사용하는 데이터 → 높은 가용성과 내구성을 제공하는 `Standard`
- 가끔 접근하지만 저장이 필요한 데이터 → 저렴한 `IA`, `One Zone-IA`
- 거의 접근하지 않는 아카이브 데이터 → `Glacier`, `Glacier Deep Archive`

---

## 주요 스토리지 클래스 비교

| 스토리지 클래스        | 내구성            | 가용성 | 가용성 SLA | 가용 영역 | 최소 스토리지 기간 | 검색 지연 시간 | 용도 요약 |
|------------------------|------------------|--------|-------------|------------|---------------------|------------------|-----------|
| Standard               | 99.999999999%    | 99.99% | 99.9%       | ≥3        | 없음                | 밀리초           | 일반적인 사용 |
| Intelligent-Tiering    | 99.999999999%    | 99.9%  | 99%         | ≥3        | 30일                | 밀리초           | 자동 티어 전환 |
| Standard-IA            | 99.999999999%    | 99.9%  | 99%         | ≥3        | 30일                | 밀리초           | 드물게 접근 |
| One Zone-IA            | 99.999999999%    | 99.5%  | 99%         | 1         | 30일                | 밀리초           | 비용 절감, 단일 AZ |
| Glacier                | 99.999999999%    | 99.99% | 99.9%       | ≥3        | 90일                | 분~시간          | 장기 보관 |
| Glacier Deep Archive   | 99.999999999%    | 99.99% | 99.9%       | ≥3        | 180일               | 12~48시간        | 최저가, 장기 보존 |

---

## 주요 클래스 설명

### S3 Standard
- **가장 보편적**이며, 고가용성과 내구성 제공
- 자주 읽고/쓰는 데이터에 적합

### S3 Standard-IA (Infrequent Access)
- **가끔 접근하는 데이터**에 적합
- 저장 비용 저렴, 읽을 때 추가 요금 있음

### S3 One Zone-IA
- IA와 비슷하지만 **단일 가용영역에만 저장**
- 비용 더 저렴하지만 장애 위험 있음

### S3 Intelligent-Tiering
- **자동 티어링**: 머신러닝으로 접근 패턴 분석
- 퍼포먼스 손실 없이 자동 전환 가능

### S3 Glacier
- **장기 아카이빙용**
- 몇 분~시간 후 검색 가능
- 용량 40TB 제한, 기본 암호화

### S3 Glacier Deep Archive
- **가장 저렴**, 거의 접근하지 않는 데이터
- 12~48시간 소요, 연 1회 미만 접근용

---

## 수명 주기 관리 (Lifecycle Management)

### 수명 주기 구성 요소
1. **전환 작업**
   - 일정 시간이 지나면 **다른 스토리지 클래스로 전환**
   - ex) 30일 후 IA, 1년 후 Glacier

2. **만료 작업**
   - 객체를 **자동으로 삭제**
   - ex) 365일 후 삭제

### 적용 예시
- ELB 로그: 30일 후 Glacier로 전환, 1년 후 삭제
- 뉴스기사: 60일 후 IA, 180일 후 Glacier 전환
- 백업파일: 1년간 Glacier 저장 후 삭제

---

## 접두사 필터 사용
- 특정 디렉토리(`prefix`)에만 규칙 적용 가능
- 예: `/folder` → `folder` 디렉토리 아래 객체만 해당 규칙 적용
- **주의**: 버킷명 제외하고 경로 명시

---

## 제한 사항
- 티어 간 이동은 일방향 (폭포식)
- 예: Standard → IA → Glacier 가능하지만 역방향 불가
- 각 스토리지 클래스마다 **최소 유지 기간** 있음

