### 3.1.5 파드의 생명주기로 쿠버네티스 구성 요소 살펴보기
쿠버네티스의 구조와 동작을 파드의 생명주기라는 맥락에서 이해하기가 수월하다.
파드가 생성되고 스케줄링되어 노드에 할당되며 실제 실행되기까지의 구성 요소들이
어떻게 작동하는지를 알아보자.
파드의 생명주기를 관통하는 쿠버네티스 구성 요소의 흐름은 아래와 같다.
중앙의 마스터 구성 요소에서 파드를 생성하고 스케줄링한 후,
파드를 실행할 수 있는 워커 노드의 kubelet에 전달하고,
kubelet은 해당 노드의 컨테이너 런타임(containerd, Docker 등)을 통해
컨테이너를 실행한다. 이때 각 요소 간에는 일정한 방식으로 통신하며
파드의 상태를 주고받는다.
이제 도표에 표현된 흐름을 기준으로 파드의 생명주기에서
쿠버네티스 구성 요소들이 어떤 역할을 하는지 순서대로 정리해보자.
1. `kubectl`을 통해 API 서버에 파드 생성을 요청한다.
2. 요청이 마스터 노드에 전달되면 API 서버는 해당 요청의 유효성 검사 및 인증을 수행하고,
etcd에 관련 정보를 저장한다. etcd는 쿠버네티스의 상태 정보를 저장하는 분산 키-값 저장소이다.
3. API 서버는 스케줄러에 파드 스케줄링을 요청한다.
4. 스케줄러는 실행 가능한 노드 중 하나를 선택한 후, 해당 정보를 etcd에 저장한다.
5. API 서버는 kubelet에게 파드 실행 정보를 전달한다.
6. kubelet은 컨테이너 런타임으로 컨테이너를 생성하도록 요청한다.
7. 파드가 생성된다.
8. 파드가 사용 가능한 상태가 된다.
이처럼 파드의 생명주기를 통해 각 구성 요소들의 역할을 연결지어 보면,
쿠버네티스 내부 동작 원리를 명확히 이해할 수 있다.
참고로 etcd는 단순한 저장소가 아니라,
쿠버네티스 API 서버에 의해 지속적으로 최신 상태가 반영되는 일관성 있는 저장소이다.
