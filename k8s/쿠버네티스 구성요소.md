### 쿠버네티스 주요 구성 요소 정리
#### 마스터 노드 구성 요소
- **kubelet**: 파드의 상태를 주기적으로 확인하고, API 서버에서 받은 명령을 실행한다.
- **API 서버**: 쿠버네티스 클러스터와 통신하는 핵심 구성 요소. 모든 명령은 API 서버를 통해 전달된다.
- **etcd**: 모든 설정 및 상태 정보를 저장하는 키-값 저장소. 고가용성을 위해 여러 노드에 분산 배포 가능.
#### 워커 노드 구성 요소
- **kubelet**: 파드 정의(PodSpec)를 받아서 컨테이너 런타임으로 전달. 파드 실행을 책임진다.
- **컨테이너 런타임(CRI)**: 파드를 실행하는 하위 계층. 대표적으로 containerd, Docker 등이 있다.
---
### 선택 가능한 구성 요소
- **CoreDNS**: DNS를 통해 서비스명을 IP로 해석. 클러스터 내 서비스 간 통신을 가능하게 해주는 핵심 구성 요소.
- **CNI 플러그인**: 파드 간 네트워크를 구성하는 인터페이스. 대표적으로 Flannel, Calico 등이 있음.
- **Flannel**: 간단한 오버레이 네트워크 제공.
- **Calico**: 라우팅 기반의 고성능 네트워크 제공. 네트워크 정책도 지원.
---
### 사용자 파드가 배포될 때의 동작
1. **kube-proxy**: 클러스터 내부의 서비스 요청을 적절한 파드로 전달하도록 iptables 또는 ipvs 설정을 관리.
2. **파드**: 노드 내부에 컨테이너 단위로 생성되며, 해당 노드에 설치된 컨테이너 런타임이 실제 실행을 담당.
---
### etcd의 역할
- 쿠버네티스의 상태 정보를 저장하는 저장소.
- 모든 구성 요소들은 etcd를 통해 상태 정보를 주고받는다.
- 분산 저장이 가능하며, 고가용성과 일관성 유지에 필수적이다.
