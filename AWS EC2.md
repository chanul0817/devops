# AWS EC2

# EC2

- **아마존 웹 서비스(AWS)에서 제공하는 클라우드 컴퓨팅 서비스**
- 클라우드 컴퓨팅은 인터넷(클라우드)을 통해 서버, 스토리지, 데이터베이스 등의 컴퓨팅 서비스를 제공 → **AWS에서 원격으로 제어할 수 있는 가상의 컴퓨터를 한 대 빌리는 것**
- 후불제 PC방과 같이 **사용한 만큼 비용을 지불**하기 때문에 탄력적인 이라는 의미의 **Elastic**이라는 단어가 붙어있다. Elastic은 **비용**적인 부분 뿐만이 아니라 필요에 따라 **성능, 용량**을 자유롭게 조절할 수 있다는 의미도 가지고 있다

# EC2 특징

- 컴퓨팅 요구사항의 변화에 따라 컴퓨팅 파워를 조정할 수 있다.
- 실제로 사용한 용량 만큼만 지불한다 (서비스 요금을 미리 약정하거나 선입금, 하드웨어 비용이 필요 없음)
- Linux / Windows 중 OS 선택이 쉽게 가능하다
- 몇 분이면 전세계에 컴퓨터 수백여대를 생성할 수 있다. (실제로 미국에 가서 건물 임대하고 컴퓨터 구입하고 네트워크 구축하는 비용과 시간에 서비스 신청만 하면 바로 이용)
- 머신러닝, 웹서버, 게임서버, 이미지 처리 등 다양한 용도에 최적화된 서버를 쉽게 구성 가능
- 여러 다른 AWS 서비스와의 유기적인 연동이 가능

## EC2를 사용하는 이유

- **효율성** : 클릭 몇 번으로 서버를 생성할 수 있기 때문에 실제 서버를 구축하는 것보다 훨씬 간편하고 효율적
- **비용 절감** : 사용한 만큼만 요금을 지불하면 되므로 비용 절감

## **EC2 인스턴스 생성의 의미**

**AMI를 토대로 운영체제, CPU, RAM 혹은 런타임 등이 구성된 컴퓨터를 빌리는 것**이다

## **EC2 인스턴스 유형**

EC2 인스턴스란 한정된 요금으로 EC2 인스턴스의 유형을 고르고 사이즈를 골라 각 인스턴스별로 사용 목적에 따라 최적화를 시키는 것이다

- **범용** : vCPU, 메모리, 네트워크, 저장 공간 등이 평균적인 사양으로 제공된다
- **컴퓨팅 최적화**: 다른 인스턴스 패밀리에 비해 메모리 대비 vCPU 비율이 높다
- **메모리 최적화** : 다른 인스턴스 패밀리에 비해 메모리 용량이 훨씬 크다
- **스토리지 최적화** : 다른 인스턴스 패밀리보다 스토리지 용량이 훨씬 크거나 초고속 I/O가 제공된다
- **GPU 인스턴스**: 고성능의 NVDIA GPU가 장착되어 있다. CUDA, OpenCL등을 실행할 때 사용된다
- **마이크로 인스턴스** : 가격이 가장 싼 인스턴스. 낮은 vCPU 성능과 적은 메모리가 제공된다. 프리티어에서는 이 인스턴스 유형을 무료로 사용할 수 있다

## **인스턴스 구매 옵션**

Amazon EC2는 사용자의 요구사항에 따라 비용을 최적화 할 수 있도록 다음과 같은 구매 옵션을 제공한다

### **온 디맨드 인스턴스** **( On Demand Instance )**

필요할 때 바로 생성해서 사용할 수 있는 방식. 과금은 1 시간 단위로 이루어지며 1분을 사용했더라도 1시간으로 책정된다. 3가지 방식 중 요금이 가장 비싸다

- **공유 인스턴스( Shared tenancy)** : 하나의 물리적인 서버에 여러 개의 EC2인스턴스가 실행 → 다른 인스턴스가 서버 자원을 많이 소모한다면 현재 인스턴스의 성능에 영향이 있을 수 있다
- **전용 인스턴스( Dedicated tenacy)** : 하나의 물리적인 서버에 하나의 EC2인스턴스가 실행 → 서버 내 다른 인스턴스가 없으므로 영향 X, 공유 인스턴스 방식보다 비싸다

### **스팟 인스턴스( Spot Instance )**

경매 방식의 인스턴스. 인스턴스의 스펙을 설정하고 원하는 가격을 입력하여 입찰하면 높게 입찰한 사람한테 인스턴스가 할당된다. ( 해당 스펙의 인스턴스를 다른 사람이 더 높은 가격으로 입찰했다면 내가 가지고 있는 인스턴스는 종료된다)

### **예약 인스턴스 ( Reserved Instacne)**

: 일정한 예약금을 선불로 내면 인스턴스를 1년 또는 3년동안 예약할 수 있으며 시간당 요금이 대폭 할인된다. 온 디맨드 인스턴스와 마찬가지로 공유 인스턴스, 전용인스턴스로 나뉜다

- 

**Light 사용률 예약 인스턴스**

: 모든 예약 인스턴스 중에서 선결제 금액이 가장 저렴하다. 사용시간이 많지 않을 때 유용하다 → 몇 달만 사용하는 개발 및 테스트와 단기 프로젝트에 적합

- 

**Medium 사용률 예약 인스턴스**

: Light보다 선결제 금액은 비싸지만 시간당 요금이 저렴하다. → 거의 항상 실행하지만 사용량에 약간의 변화가 있을 때 유용!

- 

**Heavy 사용률 예약 인스턴스**

: Medium보다 선결제 금액은 비싸지만 모든 예약 인스턴스 중에서 시간당 요금이 가장 저렴하다. → 24시간 상시 가동되어야하는 출시된 제품에 유리!

## 인스턴스 생명주기

# **AMI (Amazon Machine Images/이미지)**

**인스턴스를 실행하기 위한 정보를 모은 단위**

**세팅 정보(템플릿)를 저장한 단위**

컴퓨터를 사용하면 프로그램도 설치하고, 파일도 저장하고, 설정도 변경하게 되는데, 이 OS 상태 그대로 저장하는 기능을 이미지(AMI) 라고 한다

EC2 인스턴스를 시작하는 데 필요한 정보가 들어있는 이미지 즉, **EC2의 복사본** 이라고 보면 된다

이미지를 이용해서 새로운 컴퓨터를 만들면 이미지에 저장된 상태와 똑같은 컴퓨터를 빠르게 생성할 수 있다

# **EBS(Elastic Block Store)**

데이터를 저장하는 역할을 EBS가 한다

클라우드에서 사용하는 가상 하드디스크(HDD)

EBS는 AWS 클라우드의 Amazon EC2 인스턴스에 사용할 영구 블록 스토리지 불륨을 제공